<!doctype html><html lang=en><head><meta charset=utf-8><title>Usenir.com</title><meta name=description content=usenir.com><meta name=author content=usenir.com><meta name=viewport content="width=device-width, initial-scale=1"><style>* {
    box-sizing: border-box;
}

:root {
    /*
    orange: 32,100
    blue: 201,80,57
    */
    --hue-highlight:32;
    --saturation-highlight:100%;
    /* --hue-highlight:120;
    --saturation-highlight:60%; */
    --c-highlight-1: hsl(var(--hue-highlight), var(--saturation-highlight), 95%);
    --c-highlight-2: hsl(var(--hue-highlight), var(--saturation-highlight), 85%);
    --c-highlight-3: hsl(var(--hue-highlight), var(--saturation-highlight), 50%);
    --c-grey-0: hsl(240, 20%, 98%);
    --c-grey-1: hsl(220, 11%, 95%);;
    --c-grey-2: hsl(240, 2%, 85%);
    --c-grey-3: hsl(0, 0%, 74%);

    --c-fg-0: hsl(0, 0%, 100%);
    --c-fg-1: hsl(0, 0%, 60%);
    --c-fg-2: hsl(0, 0%, 42%);
    --c-fg-3: hsl(0, 0%, 13%);

    --c-border-1:hsl(0, 0%, 67%);
    --c-border-2:hsl(0, 0%, 53%);
    --c-border-3:hsl(0, 0%, 27%);

    /* box shadow colours */
    --c-shadow-1:hsl(0, 0%, 60%);
    --c-shadow-2:hsl(0, 0%, 42%);
    --c-shadow-3:hsl(0, 0%, 27%);
    --box-shadow-spread: 3px;
    --box-shadow-x: 0px;
    --box-shadow-y: 2px;

    --animation-speed: 1ms;

    /* scrollbar colors */
    --c-scroll-thumb: hsl(var(--hue-highlight), var(--saturation-highlight), 50%);
    --c-scroll-track: hsl(var(--hue-highlight), var(--saturation-highlight), 85%);

    --border-radius-1: 3px;
    --border-radius-2: 5px;

    --transition-duration: 125ms;
    --transition-duration-slow: 250ms;

}

@keyframes fadein {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

::-moz-selection { /* Code for Firefox */
    color:var(--c-highlight-1);
    background: var(--c-highlight-3);
}

::selection {
    color:var(--c-highlight-1);
    background: var(--c-highlight-3);
}

body {
    background: var(--c-grey-0);
    font-family: sans-serif;
    margin: 0;
    padding: 0;
    height: 100vh;
    color: var(--c-fg-3);
    scrollbar-color: var(--c-scroll-thumb) var(--c-scroll-track);
}
::-webkit-scrollbar {
    width: 0.75rem;
}

::-webkit-scrollbar-track {
    background: var(--c-scroll-track);
}

::-webkit-scrollbar-thumb {
    background: var(--c-scroll-thumb);
}

.titlebar {
    font-size: 0.9rem;
    margin: 5px;
    padding: 5px;
    display: block;
    color: var(--c-fg-1);
    font-family: monospace;
}

a {
    text-decoration: none;
    color: var(--c-fg-3);
    border-bottom: 1px solid var(--c-fg-3);
    /* background: var(--c-highlight-1); */
}

a:hover {
    /* color: var(--c-highlight-3); */
    background: var(--c-highlight-1);
    border-bottom: 1px solid var(--c-highlight-3);
}

h1{
    /* color: var(--c-highlight-3); */
    /* border-bottom: 2px solid var(--c-highlight-3); */
    font-family: serif;
    /* font-weight: normal; */
    color: var(--c-highlight-3);
    /* background: linear-gradient(90deg, var(--c-highlight-1) 60%, var(--c-grey-0) 100%); */
    /* border-left: 5px solid var(--c-highlight-3); */
    padding-left: 0.5rem;
}
h2{
    /* border-bottom: 2px dotted var(--c-highlight-3); */
    font-family: serif;
    /* font-weight: normal; */
    /* background: linear-gradient(90deg, var(--c-highlight-1) 0%, var(--c-grey-0) 60%); */
    /* border-left: 2px solid var(--c-highlight-3); */
    padding-left: 0.5rem;
}
h3,h4,h5,h6{
    /* border-bottom: 1px dotted var(--c-highlight-3); */
    font-family: serif;
    /* font-weight: normal; */
    /* background: linear-gradient(90deg, var(--c-highlight-1) 0%, var(--c-grey-0) 40%); */
    /* border-left: 2px dotted var(--c-highlight-3); */
    padding-left: 0.5rem;
}

input[type="checkbox"] {
    display: none;
}

label {
    /* display: inline-block; */
    width: 100%;
    border-radius: var(--border-radius-2);
    border:2px solid var(--c-highlight-3);
    color: var(--c-highlight-3);
    background: var(--c-highlight-1);
}
label:hover{
    background: var(--c-highlight-2);
    transition-duration: var(--transition-duration);
}

input[type="checkbox"]+label {
    padding: 0.25rem 0.5rem;
    cursor: pointer;
}

input[type="checkbox"] + label:before {
    border: 1px solid var(--c-highlight-3);
    background: var(--c-grey-0);
    content: "\00a0";
    display: inline-block;
    height: 1rem;
    margin: 0 .25em 0 0;
    padding: 0;
    vertical-align: top;
    width: 1rem;
}

input[type="checkbox"]:checked+label {
    color: var(--c-highlight-1);
    background: var(--c-highlight-3);
}

input[type="checkbox"]:checked + label:before {
    background: var(--c-grey-0);
    color: var(--c-highlight-3);
    content: "\2713";
    text-align: center;
  }

input[type="checkbox"]:disabled+label {
    cursor: not-allowed;
    background: var(--c-grey-0);
    border:1px solid var(--c-highlight-3);
    opacity: 0.5;
    transition-duration: var(--transition-duration);
}

input[type="checkbox"]:active+label {
    color: var(--c-highlight-1);
    background: var(--c-highlight-3);
    /* background: linear-gradient(90deg, var(--c-highlight-3) 50%, var(--c-highlight-2) 100%); */
    transition-duration: var(--transition-duration);
}

.container--checkbox {
    display: flex;
    margin: 3px;
    width: 100%;
    border-radius: 5px;
}

#container--logo {
    height: 100%;
    margin-right: 1rem;
    padding: 0;
    display: inline-block;
}

#container--logo>a {
    font-size: 1rem;
    text-decoration: none;
    padding: 0.5rem 1rem 0.5rem 1rem;
    color: var(--c-highlight-3);
    /* border: 5px solid var(--c-highlight-3); */
    border: 2px solid var(--c-highlight-3);
    background: var(--c-highlight-1);
    box-shadow: 0.5rem 0.5rem 0 var(--c-highlight-3);
    /* border-left: 0.25rem solid var(--c-grey-3); */
    height: 100%;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
}
#container--logo>a:hover{
    color: var(--c-fg-3);
    /* transition-duration: var(--transition-duration); */
    transition-duration: var(--transition-duration-slow);
}

#container--tags-parent {
    height: 100%;
    display: flex;
    flex-flow: column;
    animation: fadein 0.5s;
}

#container--tags {
    flex: 1;
    padding: 5px;
    overflow-x: visible;
    overflow-y: auto;
}

#container--entries-parent {
    display: flex;
    flex-flow: column;
    max-width: 15rem;

    animation: fadein 1s;
}

#container--entries {
    flex: 1;
    overflow-x: visible;
    overflow-y: auto;
    height: 100%;
}

#container--content {
    overflow-y: auto;
}

.content {
    margin: 0;
    padding: 0.5rem;
    max-height: 100%;
    overflow-y: auto;
    animation: fadein 0.5s;
    border: 2px solid var(--c-grey-2);

    background: var(--c-grey-0);
    max-width: 650px;
}
.content:hover{
    border: 2px solid var(--c-grey-3);
}

.entry {
    cursor: pointer;
    background: var(--c-grey-0);
    /* background: linear-gradient(90deg, var(--c-highlight-1) 0%, var(--c-grey-0) 30%); */
    padding: 0.25rem;
    margin: 5px 5%;
    border-radius: var(--border-radius-1);
    animation: fadein var(--animation-speed);
    border: 1px solid var(--c-highlight-2);
}

/* .entry:nth-child(even){
    background: linear-gradient(90deg, var(--c-grey-0) 70%, var(--c-highlight-1) 100%);
} */

.entry:hover {
    background: var(--c-highlight-1);
    border: 1px solid var(--c-highlight-3);
    background: linear-gradient(90deg, var(--c-highlight-2) 0%, var(--c-highlight-1) 75%);
    transition-duration: var(--transition-duration-slow);
}
/* .entry:hover .metadata--label{
}
.entry:hover .metadata--tag{
} */

.entry-metadata--title{
    font-size: 1.2em;
}

.metadata--label{
    color: var(--c-fg-1);
    font-family: monospace;
}
.metadata--tag{
    /* color: var(--c-fg-2); */
    /* border-bottom: 2px solid var(--c-highlight-2); */
    margin-right: 5px;
    font-family: monospace;
    color: var(--c-highlight-3);
}

.box {
    /* -webkit-transition: all var(--animation-speed) cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: all var(--animation-speed) cubic-bezier(0.165, 0.84, 0.44, 1); */
    /* -webkit-transition: all var(--animation-speed) cubic-bezier(0.1, 0.84, 0.44, 1);
    transition: all var(--animation-speed) cubic-bezier(0.165, 0.84, 0.44, 1); */
    -webkit-transition: all 0.1 cubic-bezier(0,0,0,0);
    transition: all 0.1 cubic-bezier(0,0,0,0);
}
.box::after {
    content: "";
    border-radius: var(--border-radius-1);
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: var(--box-shadow-x) var(--box-shadow-y) var(--box-shadow-spread) var(--c-shadow-2);
    opacity: 0;
    -webkit-transition: all 0.1 cubic-bezier(0,0,0,0);
    transition: all 0.1 cubic-bezier(0,0,0,0);
}
.box:hover {
    -webkit-transform: scale(105%, 105%);
    transform: scale(105%, 105%);
}
.box:hover::after {
    opacity: 1;
}

.button{
    border: 2px solid var(--c-highlight-3);
    background: var(--c-highlight-1);
    color: var(--c-highlight-3);
    font-size: 1.1rem;
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius-1);
    margin: 2px 0px;
    /* box-shadow: 5px 5px 0 var(--c-highlight-3); */
}
.button:hover{
    background: var(--c-highlight-2);
    transition-duration: var(--transition-duration);
}
.button:active{
    /* background: var(--c-highlight-3); */
    color: var(--c-highlight-1);
    background: linear-gradient(90deg, var(--c-highlight-3) 60%, var(--c-highlight-2) 100%);
}

.hidden {
    display: hidden;
}


.container {
    margin: 0;
    padding: 0 1rem;
    width: 100%;
    max-width: 650px;
    margin: auto;
}


.container-flex--v{
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    justify-content: flex-start;
}

/* containers */

#container--filters{
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;

    /* max-width: 30%; */
    overflow: hidden;
    overflow-y: auto;
    padding: 5px;
    /* border: 3px solid #00f; */

    /* width: 15%; */
}

#container--content-parent {
    padding: 5px;
    display: flex;
    flex: 1;
    flex-flow: column;
    animation: fadein 1.5s;
    /* border: 3px solid #0f0; */
}

#test{
    max-height: 100%;
    /* border: 5px solid #0f0; */
    /* border: inset; */
    overflow: scroll;
}

.hidden{
    display: hidden;
}
.overlay {  
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:1000;
}

html, body{
    height: 100%;
    margin: 0;
}

#container-explorer {
    margin: 0;
    padding: 0;
    height: 100%;
    /* border: 5px solid #0f0; */
    display: flex;
    flex-direction: column;
}
#header{
    /* border: 2px solid red; */
    display: flex;
    flex-direction: row;
    background: var(--c-grey-0);
    box-shadow: 0 0 1rem var(--c-grey-3);
    z-index: 3;
}
#footer{
    display: flex;
    flex-direction: row;
    background: var(--c-grey-0);
    box-shadow: 0 0 1rem var(--c-grey-3);
    z-index: 3;
}
#body{
    flex: 1;
    overflow: auto;
    height: 100%;
    background: var(--c-grey-1);
    /* box-shadow: inset 0 0 1rem var(--c-grey-2); */
    /* box-shadow: inset 0 0 1rem var(--c-grey-2); */
}

.container-flex--h{
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
}

/* #btn--filter-toggle{
    border: 2px solid var(--c-highlight-3);
    background: var(--c-highlight-1);
    color: var(--c-highlight-3);
    font-size: 1.1rem;
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius-1);
    margin: 2px 0px;
}
#btn--filter-toggle:hover{
    background: var(--c-highlight-2);
}
#btn--filter-toggle:active{
    background: var(--c-highlight-3);
    color: var(--c-highlight-1);
    background: linear-gradient(90deg, var(--c-highlight-3) 0%, var(--c-highlight-2) 100%);
} */</style></head><body><div id=container-explorer><div class=container-flex--h id=header><span class=titlebar>USENIR EXPLORER</span></div><div class=container-flex--h id=body><div id=container--filters id=test><div id=container--tags-parent><div class=titlebar>Tags:</div><div id=container--tags></div></div><div id=container--entries-parent><div class=titlebar>Found:</div><div id=container--entries></div></div></div><div id=container--content-parent><div class=titlebar>Opened:</div><div id=container--content></div></div></div><div class=container-flex--h id=footer><div id=container--logo><a href=./index.html>&#8592USENIR</a></div><button class=button>Show Filters</button></div></div><script>
        const prefixes = { "tag": "tg", "entry": "e" };
        var data = {"tags": [{"name": "knowledge", "occurrences": 1, "tag_id": 0}, {"name": "principles", "occurrences": 1, "tag_id": 1}, {"name": "wisdom", "occurrences": 1, "tag_id": 2}, {"name": "books", "occurrences": 1, "tag_id": 3}, {"name": "technology", "occurrences": 1, "tag_id": 4}, {"name": "small tech", "occurrences": 1, "tag_id": 5}, {"name": "retention", "occurrences": 1, "tag_id": 6}, {"name": "systems", "occurrences": 1, "tag_id": 7}, {"name": "cycles", "occurrences": 1, "tag_id": 8}, {"name": "development", "occurrences": 1, "tag_id": 9}, {"name": "reading", "occurrences": 2, "tag_id": 10}, {"name": "wip", "occurrences": 3, "tag_id": 11}], "entries": [{"title": " How to read a book", "tags": [{"name": "reading", "entry_tag_id": 10}, {"name": "books", "entry_tag_id": 3}], "entry_id": 0, "path": "entries/htrd.html", "modified": "1601826838.7398"}, {"title": " How to remember knowledge", "tags": [{"name": "retention", "entry_tag_id": 6}, {"name": "reading", "entry_tag_id": 10}], "entry_id": 1, "path": "entries/rmbrth.html", "modified": "1601827518.19403"}, {"title": " Importance of cycles", "tags": [{"name": "wip", "entry_tag_id": 11}, {"name": "systems", "entry_tag_id": 7}, {"name": "cycles", "entry_tag_id": 8}, {"name": "development", "entry_tag_id": 9}], "entry_id": 2, "path": "entries/cycles.html", "modified": "1601827131.99675"}, {"title": " Small tech", "tags": [{"name": "wip", "entry_tag_id": 11}, {"name": "technology", "entry_tag_id": 4}, {"name": "small tech", "entry_tag_id": 5}], "entry_id": 3, "path": "entries/small_tech.html", "modified": "1601827142.46878"}, {"title": " The Munger Operating System: How to Live a Life That Really Works", "tags": [{"name": "wip", "entry_tag_id": 11}, {"name": "knowledge", "entry_tag_id": 0}, {"name": "principles", "entry_tag_id": 1}, {"name": "wisdom", "entry_tag_id": 2}], "entry_id": 4, "path": "entries/fsinsights.html", "modified": "1601827136.51276"}]} ;
        var filter_tags = [];
        var entries_buffer = [];
        const prefix_tag = prefixes.tag;
        const prefix_entry = prefixes.entry;

        const entry_div_classlist = "entry box";
        const entry_title_classlist = "entry-metadata--title";
        const entry_metadata_label_classlist = "metadata--label";
        const entry_metadata_tag_classlist = "metadata--tag";
        const label_classlist = "label"
        const checkbox_container_classlist = "container--checkbox";

        const content_div_classList = "content";

        const titlebar_classList = "titlebar";

        window.onload = initialize;

        function initialize() {
            render_filters();
            preprocess_data();
        }
        function preprocess_data() {
            //console.log("processing");
            // add prefix to tagId in json, to directly use it later on
            data.tags.forEach(element => {
                element.tag_id = prefix_tag + element.tag_id;
            });
            // add prefix to tagId in json, to directly use it later on
            // data.entries.forEach(entry => {
            //     entry.tags.forEach(function (id, index, tagIds) {
            //         //console.log(tagIds[index]);
            //         tags[index] = prefix_tag + tags[index];
            //     });
            // });
            data.entries.forEach(entry => {
                entry.tags.forEach(element => {
                    element.entry_tag_id = prefix_tag + element.entry_tag_id;
                });
            });
        }

        function modify_filters(event) {
            var state = this;
            var reset_buffer = false;

            /*
            efficient buffer use requires knowing if filtration got stricter or looser
            stricter:
                more filters to be applied, so need to purely cut elements from current buffer
            looser:
                more entries from the universal set have become eligible to enter into the buffer set,
                so need to reset buffer by copying the universal set into it
                ToDo: Instead of resetting buffer, find a way to add entries to it more surgicallly
                    Why? Because loading up the entire universal set for processing when a filter
                    that barely has any effect is removed causes a huge computation debt for a tiny
                    change in the list
                    What to keep in mind? resetting the buffer is actually fast because it's getting set by reference
            */
            tag_id = this.id;

            if (this.checked) {
                filter_tags.push(tag_id);
            } else {
                filter_tags.splice(filter_tags.indexOf(tag_id), 1);
                reset_buffer = true;
            }

            if (reset_buffer === true) {
                reset_entries_buffer();
            }
            //console.clear();
            get_entries();
            render_entries();
        }
        function reset_entries_buffer() {
            entries_buffer = data.entries;
        }

        function get_entries() {
            //reset entries_buffer with universal set if the filter tag isn't empty
            if (filter_tags.length != 0 && entries_buffer.length == 0) {
                entries_buffer = data.entries;
            }
            let processing_buffer = [];

            //sort tags in ascending order to improve filtration speed
            filter_tags.sort();

            //console.log(filter_tags);
            // the concept is: filter entries_buffer and put whatever is relevant into processing_buffer
            for (var iter_filter = 0, len = filter_tags.length; iter_filter < len; iter_filter++) {
                let tag_id = filter_tags[iter_filter];
                console.log("entries buffer:", entries_buffer);
                processing_buffer = entries_buffer.filter(function (e) {
                    //return e.tags.includes(tag_id);
                    //console.log(does_entry_have_tag(e, tag_id));
                    return does_entry_have_tag(e, tag_id);
                });
                console.log(processing_buffer);
                //update entries_buffer with freshly processed trimmed down data for next iteration
                entries_buffer = processing_buffer;
                //console.log(entries_buffer);
            }
            //finally dump processing_buffer into entries_buffer no matter what
            entries_buffer = processing_buffer;
        }

        function does_entry_have_tag(entry, tag_id) {
            for (i = 0, len = entry.tags.length; i < len; i++) {
                console.log(entry.tags[i].entry_tag_id + " vs " + tag_id)
                if (entry.tags[i].entry_tag_id == tag_id) {
                    return true;
                }
            }
            return false;
        }

        function render_filters() {
            var checkboxes = document.createDocumentFragment();

            // let disabled_counter = 0;

            for (var i = 0, len = data.tags.length; i < len; i++) {
                var checkbox_container = document.createElement("div");
                checkbox_container.classList = checkbox_container_classlist;
                var checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.id = prefix_tag + data.tags[i].tag_id;

                // checkbox.name = data.tags[i].name;
                checkbox.onclick = modify_filters;

                var label = document.createElement('label');
                label.htmlFor = prefix_tag + data.tags[i].tag_id;
                label.classList = label_classlist;
                label.append(document.createTextNode(data.tags[i].name));

                // if (disabled_counter % 2 == 1) {
                //     checkbox.disabled = true;
                //     label.classList.remove("box");
                // }
                // disabled_counter += 1;

                checkbox_container.appendChild(checkbox);
                checkbox_container.appendChild(label);
                checkboxes.appendChild(checkbox_container);
            }

            // Clear parent div
            var parent = document.getElementById("container--tags");
            parent.innerHTML = "";
            parent.appendChild(checkboxes);
        }

        function render_entries() {
            var entries = document.createDocumentFragment();
            for (var i = 0, len = entries_buffer.length; i < len; i++) {
                var entry_div = document.createElement("div");
                entry_div.classList = entry_div_classlist;
                entry_div.entry_id = prefix_entry + entries_buffer[i].entry_id;
                entry_div.onclick = load_entry;
                entry_div.path = entries_buffer[i].path;
                //console.log(entries_buffer[i].path);

                let entry_title = document.createElement("span");
                entry_title.append(document.createTextNode(entries_buffer[i].title))
                entry_title.classList = entry_title_classlist;
                entry_div.appendChild(entry_title);

                let br = document.createElement("br");
                entry_div.appendChild(br);

                let entry_metadata_label = document.createElement("span");
                entry_metadata_label.append(document.createTextNode("tags:"));
                entry_metadata_label.classList = entry_metadata_label_classlist;
                entry_div.appendChild(entry_metadata_label);

                entries_buffer[i].tags.forEach(tag => {
                    let entry_metadata_tag = document.createElement("span");
                    entry_metadata_tag.append(document.createTextNode("#" + tag.name));
                    entry_metadata_tag.classList = entry_metadata_tag_classlist;
                    entry_div.appendChild(entry_metadata_tag);
                });


                // add tags

                entries.append(entry_div);
            }

            div_parent = document.getElementById("container--entries");
            div_parent.innerHTML = "";
            div_parent.appendChild(entries);
        }

        function load_entry(event) {
            let state = this;
            console.log(state.path)
            fetch(state.path).then(function (response) {
                return response.text();
            }).then(function (html) {
                // This is the HTML from our response as a text string
                let parent = document.getElementById("container--content");
                parent.innerHTML = "";

                var content_div = document.createElement("div");
                content_div.classList = content_div_classList;
                content_div.innerHTML = html;
                parent.appendChild(content_div);
            });
        }
    </script></body></html>