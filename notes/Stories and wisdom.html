<!doctype html><html lang=en><head><meta charset=utf-8><title>Usenir.com</title><meta name=description content=usenir.com><meta name=author content=usenir.com><meta name=viewport content="width=device-width, initial-scale=1"><style>*{box-sizing:border-box}.section{display:block;margin-bottom:1em}.margined{margin:14px 14px 14px 28px}body{max-width:650px;line-height:1.3;margin:40px auto;font-family:sans-serif}pre{padding:0.25em 1em;display:block;background-color:rgba(0,0,0,0.1)}pre,code{font-family:"Source Code Pro",Consolas,"Ubuntu Mono",Menlo,"DejaVu Sans Mono",monospace,monospace!important}h1,h2,h3{line-height:1.2}table{border-collapse:collapse}th,td{border:1px solid #ccc;padding:1px 5px}blockquote{margin:20px 0;padding:0 20px}.small{font-size:0.8em}.weak{opacity:0.6}.nodecoration{text-decoration:none}.logo{font-weight:bold}.block{display:block}</style></head><body><div class="section margined navbar"><a class=logo href=../index.html>usenir.com</a><span>&nbsp|&nbsp</span><a href=#>about</a><span>&nbsp|&nbsp</span><a href=../index.html>archive</a></div><div class="section margined"><h1>Stories and wisdom</h1><span class="small weak">Learning from others' mistakes</span><br><span class="small weak">tags:&nbsp</span><span class="small weak">failure&nbsp</span><span class="small weak">stories&nbsp</span><span class="small weak">twitter&nbsp</span><br><span class="small weak">01/12/2020 - 01/12/2020</span></div><div class="section margined"><hr><span><b>Index</b></span><div class=toc><ul><li><a href=#learnings-form-openai>Learnings form OpenAi</a></li><li><a href=#enterpreneurship>Enterpreneurship</a></li><li><a href=#software>Software</a></li></ul></div><hr></div><div class="section margined"><h1 id=learnings-form-openai>Learnings form OpenAi</h1><p>Smerity <a href=https://twitter.com/Smerity/status/1011340815682056192>twitter thread</a></p><p>The @OpenAI team have done amazing work and really opened my eyes towards many of AI's possibilities, the vast majority positive. Instead of discussing my opinion of the nitty gritty, I'll try to stay at the highest levels of abstraction as to how this has impacted my thinking.</p><p>I want to wax poetic about the models (LSTM+PPO pushed far beyond what people likely thought possible, mirroring @Smerity et al + @GaborMelis et al in LSTM language modeling), the game (DotA as a complex test-bed), or the stupendous compute (180 years of gaming per day), but the real focus should be on how these bots are better team players than humans.</p><p>Humans pride themselves on this. Every darn Disney film focuses on this. Society is based on this.</p><p>Yet these "dumb" bots used self play and coarse objectives to learn better team work than humans.</p><p>For me this registered as a distinctly different beast as to what ML/AI is traditionally superhuman at. I was a heavy DotA player (started WC3 era and have played 830 hours of Dota 2) and these bot games are best described "restricted gameplay but with a sophisticated team plot".</p><p>I honestly believe the "restricted gameplay" part is irrelevant as I see no major obstacles (other than immense engineering which @OpenAI are well equipped) that would prevent near bot perfection. It's the team work angle that is distinctly unique and the new addition for me.</p><p>The bots knew when to take the fall to set their team up, when to waive their local reward for the team's global reward, and had no sense of a hero complex (I'm going to attack as I have a time limited Double Damage rune even though my team isn't ready!).</p><p>Humans can't learn this properly. At the amateur level, amateurs can't rely on their team mates. At the professional level, there are only so many hours in a day to perfect co-operation and players suffer from rage quits / going full tilt / ... even at the highest tier of sports.</p><p>This is an iterated prisoner's dilemma but humans will never spend enough time in this jail to work out how to optimally play the game through team work and collaboration. Conversely, we can happily lock our friendly @OpenAI Five team into hundreds of years of gameplay per day.</p><p>Why is this exciting for me? This has implications far beyond DotA. These bots never see traditional human strategies, they only play the game as the rules and objectives dictate it should be played. If there's a positive sum way to play a "human" zero sum game, it'll find it.</p><p>I would argue humans have forced themselves into a corner in many places due to our limits - slowly evolving rules that have high overheard to set up and poor interpretability. Ex: Loop holes are ~when laws aren't updated to account for changed context or adversarial intentions.</p><p>These bots weren't perfect at most of the skills humans optimize for. In a million ways they appear to have suboptimal behaviour to humans (getting gold (last hitting, jungling, farming, ...), strategy (creep blocking, pushing towers, ...), ...) - but that really didn't matter.</p><p>The bots, working as a team, saw the objective pipeline and optimized for the parts that mattered. They don't get all the gold+items if it means their team members are underpowered. They don't get the ultra-quadruple-mega-kill for glory when it'll make your team lose the game.</p><p>We could see a future where many of society's patchwork forced complexities fall away as these automated systems reveal the premature optimizations we've tricked ourselves into and the obvious blindspots we've missed that until now are only visible with hindsight.</p><p>We as humans aren't smart enough to see through that fog of complexity and complex interaction - but the systems we write might be. They might help us achieve the objectives which we've been lossily and haphazardly walking towards for hundreds of years.</p><h1 id=enterpreneurship>Enterpreneurship</h1><p>Josh Wolfe@lux_capital <a href=https://threadreaderapp.com/thread/980541011008147456.html>twitter thread</a></p><p>Here are some REALLY interesting findings from a controversial empirical paper asking: WHY do some people become ENTREPRENEURS?*</p><p>Of the many findings + hypotheses, a few stand out</p><ol><li>SIGNALING theory </li><li>REJECTING a system that REJECTS them...</li></ol><p>One of my favorite quotes is from William Blake: "I must CREATE a system or be ENSLAVED by another mans; I will not reason and compare: my business is to CREATE" Related: In recent thread on the rule-following/restrictive conformity of some MBA institutions (good criticism/counterpoints expressed, most vocally by sunk-cost + identifying MBAs) I see value in </p><ol><li>concentrated self-selecting network</li><li>SIGNALING</li></ol><blockquote><p>Quoting other <a href=https://twitter.com/wolfejosh/status/979853707713146880>tweet</a> of his: Some who come from difficult backgrounds use it as necessary signaling for lazy decision makers who can’t spot raw talent and need it filtered for them. For them it makes sense</p></blockquote><p><a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2596846">This paper</a> by NYU Stern (MBA school) friend + prof Deepak Hedge suggests: * Individuals with ACTUAL ability that EXCEEDS the SIGNAL value of their ability (ie they know they are better than employers can tell from credentials)...become entrepreneurs. * Any individual has an incentive to start a venture IF potential employees underestimate their ability * Steve Jobs was rejected for job at HP (b/c he lacked degree) * Jan Koum was rejected by Twitter AND Facebook (to start WhatsApp 1 year later + sell 5 years later for $19B)... * Overconfident, hubristic individuals gravitate toward be entrepreneurs...AND...tend to have higher ability, greater self-esteem AND more likely to have done "illict activities" than others. Also: money matters.</p><p>This model focused on ONE key item: <em>asymmetric information about ability</em> From a corner food vendor without a HS diploma to a high-tech founder with a PhD from MIT ...to predict WHO is more likely to SUCCEED as an ENTREPRENEUR...</p><p>They apply Akerlof's "market for lemons"</p><ul><li>co's offer jobs based on observable SIGNALS, BUT better informed people believing they have more ability than they signal become FOUNDERS claiming more of residual value of their talent; flipping things:</li><li>founders=cherries</li><li>workers=lemons</li></ul><p>KEY conclusion? </p><p>1.Asymmetric info about ability* leads existing firms to employ "lemons" 2. Talented people without as much signal choose to be entrepreneurs, contrasting MUCH of social science</p><p>So many stories of great IMMIGRANT founders, here's empirical logic WHY more become entrepreneurs(!):</p><ol><li>IMMIGRANTS may have had "less credible ability signals" for "regular" jobs </li></ol><p><strong>plus</strong></p><ol start=2><li>Why friends/family are dominant source of $ at start when asymmetric info of ability is at max</li></ol><p>Basically: Ode to the OUTSIDERS with something to prove any system that rejected them (or they believe might) and as Blake said...creates their own system so as to not be ensalved by another man's....</p><h1 id=software>Software</h1><p>McLaren Stanley@ uber <a href=https://twitter.com/StanTwinB/status/1336890442768547845>twitter thread</a></p><p>Alright folks, gather round and let me tell you the story of (almost) the biggest engineering disaster I’ve ever had the misfortune of being involved in. It’s a tale of politics, architecture and the sunk cost fallacy [I’m drinking an Aberlour Cask Strength Single Malt Scotch]</p><p>The year was 2016. Donald Trump was not yet the President therefore the #DeleteUber movement hadn’t happened yet. TK was still the CEO, we were still in the hyper growth phase of international rollout, public sentiment was overwhelmingly positive, Uber was riding high.</p><p>But hypergrowth is not without its problems, and the app itself was starting to show some cracks. The engineering org had doubled in sized almost every year prior, and when you grow that fast you end up with an incredibly wide range of skill. That paired with a hacking mentality</p><p>that we called “Let builder’s build”, meant that the app architecture was complicated and fragile. Uber at the time was extremely heavy on client side logic so the app would break a lot. We were constantly doing hot fixes, burning releases, etc. The design was also scaling badly.</p><p>As a consequence of all these problems, there began to be a growing movement across all levels of the org that was rallying around the idea of “rewriting the app from scratch” The general sentiment was that the architecture was slowing us down, starting over would be faster.</p><p>So a team was formed to build a new mobile architecture for this new app. The driving charter for the team was to build an architecture that would “sustain mobile development at Uber for the next 5 years”. We did both platforms at once. Product and Design also started over.</p><p>On the iOS side of the world, the rewrite presented an opportunity to adopt Swift (which was in version 2.x during this timespan). Uber had tried Swift before, but like many who had adopted it that early on it was extremely problematic so it had been banned prior to the rewrite.</p><p>But the general feeling of the architecture team was that most of Swift’s problems centered around the flakiness of the Objective-C interop back then so if we wrote a pure Swift app we could avoid the major issues.</p><p>There was also a push to use the same major architectural patterns on both Android and iOS. The android folks at the time were big RxJava fans, and there was an equivalent RxSwift library that took advantage of the functional programming paradigms in Swift. Seemed straightforward</p><p>So this smaller core team of Design, Product, and Architecture went off in a room for with their new functional/reactive patterns, new language, and new app for a few months. Everything went well. The architecture relied heavily on the advanced language features of Swift.</p><p>The UI design was scalable for the growing number of products that Uber offered, the functional programing paradigm was powerful (albeit a bit of a learning curve), the architecture centered around our new realtime stream based networking protocol (that’s the part I wrote).</p><p>After a few months and a number of flashy demos later the momentum was building. The project was looking like a success. They had built amazing experiences in a short time with a small number of engineers. Most of the core product was built out. The execs were sold.</p><p>So the company-wide rollout began. Teams began shifting all their focus to bringing their features to the new app. At first the excitement of the new created a flurry of motivation and productivity. The architecture was built for feature isolation which allowed teams to move fast</p><p>But once Swift started to scale past ten engineers the wheels started coming off. The Swift compiler is still much slower than Objective-C to then but back then it was practically unusable. Build times went though the roof. Typeahead/debugging stopped working entirely.</p><p>There’s a video somewhere in one of our talks of an Uber engineer typing a single line statement in Xcode and then waiting 45 seconds for the letter to appear in the editor slowly, one-by-one.</p><p>Then we hit a wall with the dynamic linker. At the time you could only link Swift libraries dynamically. Unfortunately the linker executed in polynomial time so Apple’s recommend maximum number of libraries in a single binary was 6. We had 92 and counting.</p><p>As a result It took 8-12 seconds after tapping the app icon before main was even called. Our shinny new app was slower than the old clunky one. Then the binary size problem hit.</p><p>But to answer @tapbot_paul’s original question, when the problems started showing up in earnest, we were already way past the point of no turning back (sunk cost fallacy). At this point the whole company was pouring its energy into the new app.</p><p>Thousands of people across every discipline, millions and millions (I can’t tell you the real number but it was way more than 1) of dollars had been spent. The whole management chain was fully bought in. I had privately had the “we need to stop” conversation with my director.</p><p>He told me that if this project fails he might as well pack his bags. The same was true for his boss all the way up to the VP. There was no way out.</p><p>So we rolled up our sleeves, and put our best people on each of the problems and prioritized the launch critical issues (dynamic linking, binary size). I was assigned to both dynamic linking and binary size in that order.</p><p>We quickly discovered that putting all of our code in the main executable solved the linking problem at App start up. But as we all know, Swift conflates namespacing with frameworks; so to do so would take a huge code change involving countless namespace checks.</p><p>That’s when the brilliant Richard Howell (not sure if he’s on Twitter) discovered while reading the Xcode build output that he could take all the intermediate object files and re-link them back into the main executable with a custom script after the build was complete.</p><p>Since Swift mangles the object namespace into the symbol name itself at compile time, this meant that he could safely preserve the namespacing while doing this. This allowed us to effectively static link our libraries and cut our pre-main time from 10 to basically 0.</p><p>Next problem: App Size. At the time we were planning to include the new app in the old app bundle and slowly roll it out at runtime as a safety net. First thing we did to buy space was to just remove the old app. We called this release strategy “Yolo”. TK himself made the call.</p><p>We also replaced <em>all</em> of our Swift structs with classes. Value types in general have a ton of overhead due to object flattening and the extra machine code needed for the copy behavior and auto-initializers etc. This saved us space so we pressed on.</p><p>But as the app kept growing. Soon we hit the cellar download limit (100 mb) for our universal binaries (iOS 8 and earlier). This represented a substantial amount of lost signups (it dollars it would cost us in the order of 8 figures of people who hadn’t upgraded yet).</p><p>At this point we were weeks away from the public launch date. We had graciously received help from a certain company that I’m still under NDA with, but they couldn’t solve our problem. The only thing we could do was regenerate all the model code (25% of the total line count) back into Objective-C or drop support for iOS 8. Since iOS 9 had introduced individual architecture slicing it was affectively half the size (give or take). With only a week left we decided eat the 8 figures and drop support for iOS 8.</p><p>The general thinking was that at half the size we still had plenty of runway with the iOS 9 binary, and after the rewrite was done we could solve the problem sometime way down the road, because things would slow down a bit. We were unfortunately completely wrong about that.</p><p>After the app release we threw a huge party. The app was well received by the press. It was fast and snappy, with a flashy new design.</p><p>A bunch of people got promoted. We all breathed a sigh of relief. The 90 work weeks stopped for a few weeks.</p><p><strong>Replies:</strong></p><ul><li>David A Smith: This so reminds me of when we were working with Taligent. They went all in on C++ templates for their frameworks. Even tiny apps were huge and compile times were so long you could go out to lunch. It was so frustrating and sad.<ul><li>McLaren Stanley: This is exactly right. The C++ templating problem is actually extremely similar. Very similar language concept, expensive for a lot of the same reasons.</li></ul></li></ul></div><div class="section margined"><b>- eof -</b></div></div></body></html>